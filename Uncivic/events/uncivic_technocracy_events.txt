namespace = uncivic_technocracy

# 101 enable (scopeless)
event = {
	id = uncivic_technocracy.101
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		event_target:global_event_country = {
			country_event = { id = uncivic_technocracy.111 }
		}
	}
}

# 102 disable (scopeless)
event = {
	id = uncivic_technocracy.102
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		event_target:global_event_country = {
			country_event = { id = uncivic_technocracy.112 }
		}
	}
}

# 111 enable
country_event = {
	id = uncivic_technocracy.111
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		# no additional initialization needed for technocracy
	}
}

# 112 disable
country_event = {
	id = uncivic_technocracy.112
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_country = {
			every_owned_leader = {
				remove_trait = uncivic_technocracy_leader_trait_technocrat
				remove_trait = uncivic_technocracy_leader_trait_technocrat_physics
				remove_trait = uncivic_technocracy_leader_trait_technocrat_society
				remove_trait = uncivic_technocracy_leader_trait_technocrat_engineering
			}
			every_pool_leader = {
				remove_trait = uncivic_technocracy_leader_trait_technocrat
				remove_trait = uncivic_technocracy_leader_trait_technocrat_physics
				remove_trait = uncivic_technocracy_leader_trait_technocrat_society
				remove_trait = uncivic_technocracy_leader_trait_technocrat_engineering
			}
		}
	}
}

# 121 government added civic
country_event = {
	id = uncivic_technocracy.121
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		# nothing needed
	}
}

# 122 government removed civic
country_event = {
	id = uncivic_technocracy.122
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		# nothing needed
	}
}

# on_added_to_leader_pool
# root = country
# from = leader
country_event = {
	id = uncivic_technocracy.201
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_global_flag = uncivic_technocracy_enabled
		exists = from.creator
		from.creator = { has_valid_civic = civic_technocracy }
		from = { NOT = { leader_class = scientist } }
	}
	immediate = {
		random = {
			chance = 50
			from = {
				add_trait = uncivic_technocracy_leader_trait_technocrat
			}
		}
	}
}

# on_game_start_country
country_event = {
	id = uncivic_technocracy.211
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_global_flag = uncivic_technocracy_enabled
		has_valid_civic = civic_technocracy
	}
	immediate = {
		random_owned_leader = {
			limit = {
				is_ruler = no
				leader_class = governor
			}
			add_trait = uncivic_technocracy_leader_trait_technocrat
		}
	}
}

# on_leader_level_up
country_event = {
	id = uncivic_technocracy.221
	title = uncivic_technocracy.221.title
	desc = uncivic_technocracy.221.desc
	is_triggered_only = yes
	event_window_type = leader_story
	event_picture_background = "GFX_leader_recruitment_bg_renowned"
	picture = GFX_evt_physics_research
	picture_event_data = {
		portrait = from
	}
	trigger = {
		from = {
			has_skill = 4
			has_trait = uncivic_technocracy_leader_trait_technocrat
		}
	}
	option = {
		name = uncivic_technocracy_leader_trait_technocrat_physics
		from = { add_trait = uncivic_technocracy_leader_trait_technocrat_physics }
		ai_chance = {
			base = 1
			modifier = {
				add = 5
				exists = from.planet
				from.planet = {
					OR = {
						has_generator_designation = yes
						has_research_designation = yes
					}
				}
			}
		}
	}
	option = {
		name = uncivic_technocracy_leader_trait_technocrat_society
		from = { add_trait = uncivic_technocracy_leader_trait_technocrat_society }
		ai_chance = {
			base = 1
			modifier = {
				add = 5
				exists = from.planet
				from.planet = {
					OR = {
						has_farming_designation = yes
						has_unity_designation = yes
					}
				}
			}
		}
	}
	option = {
		name = uncivic_technocracy_leader_trait_technocrat_engineering
		from = { add_trait = uncivic_technocracy_leader_trait_technocrat_engineering }
		ai_chance = {
			base = 1
			modifier = {
				add = 5
				exists = from.planet
				from.planet = {
					OR = {
						has_mining_designation = yes
						has_factory_designation = yes
						has_foundry_designation = yes
						has_industrial_designation = yes
					}
				}
			}
		}
	}
}